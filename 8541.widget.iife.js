"undefined"!=typeof globalThis&&(void 0===globalThis.process&&(globalThis.process={env:{NODE_ENV:"production"},browser:!0,version:"",versions:{}}),void 0===globalThis.require&&(globalThis.require=function(e){if("process/browser"===e||"process"===e)return globalThis.process;throw new Error("Module not found: "+e)})),"undefined"!=typeof window&&(void 0===window.process&&(window.process={env:{NODE_ENV:"production"},browser:!0,version:"",versions:{}}),void 0===window.require&&(window.require=function(e){if("process/browser"===e||"process"===e)return window.process;throw new Error("Module not found: "+e)})),"undefined"!=typeof global&&(void 0===global.process&&(global.process={env:{NODE_ENV:"production"},browser:!0,version:"",versions:{}}),void 0===global.require&&(global.require=function(e){if("process/browser"===e||"process"===e)return global.process;throw new Error("Module not found: "+e)})),"undefined"!=typeof self&&(void 0===self.process&&(self.process={env:{NODE_ENV:"production"},browser:!0,version:"",versions:{}}),void 0===self.require&&(self.require=function(e){if("process/browser"===e||"process"===e)return self.process;throw new Error("Module not found: "+e)})),(this.webpackChunkHLWidget=this.webpackChunkHLWidget||[]).push([[8541],{58541:(e,t,n)=>{n.d(t,{coinbaseWallet:()=>s,safe:()=>u});var i=n(34982),r=n(63926),o=n(89675),a=n(63827),c=n(61566);function s(e={}){return"3"===e.version||e.headlessMode?function(e){let t,d,h,u,l;return(0,i.U)(i=>({id:"coinbaseWalletSDK",name:"Coinbase Wallet",rdns:"com.coinbase.wallet",type:s.type,async connect({chainId:e}={}){try{const t=await this.getProvider(),n=(await t.request({method:"eth_requestAccounts"})).map(e=>(0,o.b)(e));h||(h=this.onAccountsChanged.bind(this),t.on("accountsChanged",h)),u||(u=this.onChainChanged.bind(this),t.on("chainChanged",u)),l||(l=this.onDisconnect.bind(this),t.on("disconnect",l));let i=await this.getChainId();if(e&&i!==e){const t=await this.switchChain({chainId:e}).catch(e=>{if(e.code===a.vx.code)throw e;return{id:i}});i=t?.id??i}return{accounts:n,chainId:i}}catch(e){if(/(user closed modal|accounts received is empty|user denied account)/i.test(e.message))throw new a.vx(e);throw e}},async disconnect(){const e=await this.getProvider();h&&(e.removeListener("accountsChanged",h),h=void 0),u&&(e.removeListener("chainChanged",u),u=void 0),l&&(e.removeListener("disconnect",l),l=void 0),e.disconnect(),e.close()},async getAccounts(){const e=await this.getProvider();return(await e.request({method:"eth_accounts"})).map(e=>(0,o.b)(e))},async getChainId(){const e=await this.getProvider(),t=await e.request({method:"eth_chainId"});return Number(t)},async getProvider(){if(!d){const r=await(async()=>{const{default:e}=await n.e(7194).then(n.t.bind(n,37194,19));return"function"!=typeof e&&"function"==typeof e.default?e.default:e})();t=new r({...e,reloadOnDisconnect:false});const o=t.walletExtension?.getChainId(),a=i.chains.find(t=>e.chainId?t.id===e.chainId:t.id===o)||i.chains[0],c=e.chainId||a?.id,s=e.jsonRpcUrl||a?.rpcUrls.default.http[0];d=t.makeWeb3Provider(s,c)}return d},async isAuthorized(){try{return!!(await this.getAccounts()).length}catch{return!1}},async switchChain({addEthereumChainParameter:e,chainId:t}){const n=i.chains.find(e=>e.id===t);if(!n)throw new a.ch(new r.nk);const o=await this.getProvider();try{return await o.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,c.cK)(n.id)}]}),n}catch(i){if(4902===i.code)try{let i,r;i=e?.blockExplorerUrls?e.blockExplorerUrls:n.blockExplorers?.default.url?[n.blockExplorers?.default.url]:[],r=e?.rpcUrls?.length?e.rpcUrls:[n.rpcUrls.default?.http[0]??""];const a={blockExplorerUrls:i,chainId:(0,c.cK)(t),chainName:e?.chainName??n.name,iconUrls:e?.iconUrls,nativeCurrency:e?.nativeCurrency??n.nativeCurrency,rpcUrls:r};return await o.request({method:"wallet_addEthereumChain",params:[a]}),n}catch(e){throw new a.vx(e)}throw new a.ch(i)}},onAccountsChanged(e){0===e.length?this.onDisconnect():i.emitter.emit("change",{accounts:e.map(e=>(0,o.b)(e))})},onChainChanged(e){const t=Number(e);i.emitter.emit("change",{chainId:t})},async onDisconnect(e){i.emitter.emit("disconnect");const t=await this.getProvider();h&&(t.removeListener("accountsChanged",h),h=void 0),u&&(t.removeListener("chainChanged",u),u=void 0),l&&(t.removeListener("disconnect",l),l=void 0)}}))}(e):function(e){let t,d,h,u;return(0,i.U)(i=>({id:"coinbaseWalletSDK",name:"Coinbase Wallet",rdns:"com.coinbase.wallet",type:s.type,async connect({chainId:e,...t}={}){try{const n=await this.getProvider(),i=(await n.request({method:"eth_requestAccounts",params:"instantOnboarding"in t&&t.instantOnboarding?[{onboarding:"instant"}]:[]})).map(e=>(0,o.b)(e));d||(d=this.onAccountsChanged.bind(this),n.on("accountsChanged",d)),h||(h=this.onChainChanged.bind(this),n.on("chainChanged",h)),u||(u=this.onDisconnect.bind(this),n.on("disconnect",u));let r=await this.getChainId();if(e&&r!==e){const t=await this.switchChain({chainId:e}).catch(e=>{if(e.code===a.vx.code)throw e;return{id:r}});r=t?.id??r}return{accounts:i,chainId:r}}catch(e){if(/(user closed modal|accounts received is empty|user denied account|request rejected)/i.test(e.message))throw new a.vx(e);throw e}},async disconnect(){const e=await this.getProvider();d&&(e.removeListener("accountsChanged",d),d=void 0),h&&(e.removeListener("chainChanged",h),h=void 0),u&&(e.removeListener("disconnect",u),u=void 0),e.disconnect(),e.close?.()},async getAccounts(){const e=await this.getProvider();return(await e.request({method:"eth_accounts"})).map(e=>(0,o.b)(e))},async getChainId(){const e=await this.getProvider(),t=await e.request({method:"eth_chainId"});return Number(t)},async getProvider(){if(!t){const r="string"==typeof e.preference?{options:e.preference}:{...e.preference,options:e.preference?.options??"all"},{createCoinbaseWalletSDK:o}=await n.e(1381).then(n.bind(n,1381)),a=o({...e,appChainIds:i.chains.map(e=>e.id),preference:r});t=a.getProvider()}return t},async isAuthorized(){try{return!!(await this.getAccounts()).length}catch{return!1}},async switchChain({addEthereumChainParameter:e,chainId:t}){const n=i.chains.find(e=>e.id===t);if(!n)throw new a.ch(new r.nk);const o=await this.getProvider();try{return await o.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,c.cK)(n.id)}]}),n}catch(i){if(4902===i.code)try{let i,r;i=e?.blockExplorerUrls?e.blockExplorerUrls:n.blockExplorers?.default.url?[n.blockExplorers?.default.url]:[],r=e?.rpcUrls?.length?e.rpcUrls:[n.rpcUrls.default?.http[0]??""];const a={blockExplorerUrls:i,chainId:(0,c.cK)(t),chainName:e?.chainName??n.name,iconUrls:e?.iconUrls,nativeCurrency:e?.nativeCurrency??n.nativeCurrency,rpcUrls:r};return await o.request({method:"wallet_addEthereumChain",params:[a]}),n}catch(e){throw new a.vx(e)}throw new a.ch(i)}},onAccountsChanged(e){0===e.length?this.onDisconnect():i.emitter.emit("change",{accounts:e.map(e=>(0,o.b)(e))})},onChainChanged(e){const t=Number(e);i.emitter.emit("change",{chainId:t})},async onDisconnect(e){i.emitter.emit("disconnect");const t=await this.getProvider();d&&(t.removeListener("accountsChanged",d),d=void 0),h&&(t.removeListener("chainChanged",h),h=void 0),u&&(t.removeListener("disconnect",u),u=void 0)}}))}(e)}s.type="coinbaseWallet";var d=n(98517),h=n(35905);function u(e={}){const{shimDisconnect:t=!1}=e;let r,a;return(0,i.U)(i=>({id:"safe",name:"Safe",type:u.type,async connect(){const e=await this.getProvider();if(!e)throw new d.N;const n=await this.getAccounts(),r=await this.getChainId();return a||(a=this.onDisconnect.bind(this),e.on("disconnect",a)),t&&await(i.storage?.removeItem("safe.disconnected")),{accounts:n,chainId:r}},async disconnect(){const e=await this.getProvider();if(!e)throw new d.N;a&&(e.removeListener("disconnect",a),a=void 0),t&&await(i.storage?.setItem("safe.disconnected",!0))},async getAccounts(){const e=await this.getProvider();if(!e)throw new d.N;return(await e.request({method:"eth_accounts"})).map(o.b)},async getProvider(){if("undefined"!=typeof window&&window?.parent!==window){if(!r){const{default:t}=await n.e(8222).then(n.bind(n,58222)),i=new t(e),o=await(0,h.w)(()=>i.safe.getInfo(),{timeout:e.unstable_getInfoTimeout??10});if(!o)throw new Error("Could not load Safe information");const a=await(async()=>{const e=await n.e(3205).then(n.t.bind(n,53205,19));return"function"!=typeof e.SafeAppProvider&&"function"==typeof e.default.SafeAppProvider?e.default.SafeAppProvider:e.SafeAppProvider})();r=new a(o,i)}return r}},async getChainId(){const e=await this.getProvider();if(!e)throw new d.N;return Number(e.chainId)},async isAuthorized(){try{return(!t||!await(i.storage?.getItem("safe.disconnected")))&&!!(await this.getAccounts()).length}catch{return!1}},onAccountsChanged(){},onChainChanged(){},onDisconnect(){i.emitter.emit("disconnect")}}))}u.type="safe"}}]);
//# sourceMappingURL=8541.widget.iife.js.map